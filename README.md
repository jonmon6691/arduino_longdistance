# arduino_LongDistance
An improvement to [arduino_RustysCalling]() that increases range, responsiveness, battery life, reduces complexity, and even folds your laundry!

_Todo_
* How long does the remote last on battery? Started test at 10:20pm 7/18, Stopped working at: __
* Experiment with making the ringer louder
* Design ringer control from the adafruit board
* Integrate SFX board with adafruit board
* Clean up phone wiring, can I get a new handset??
* Add wiring for dial

## Remote
This module is simply a button and a LoRa transmitter.

While the button is pressed, the remote transmitts packets as fast as it can. Otherwise it's idle, not sending anything.

Note: To maximize the packet rate (and therefore increase the responsiveness), the modems use the `.setModemConfig(RH_RF95::Bw500Cr45Sf128)` setting to optimize speed at the cost of distance. In preactice this results in a packet every 8ms.

## Phone
The LoRa receiver also orchestrates the phones other functions

### Ringer
Every time the phone receives a LoRa packet, it will run the ringer for the next 20 milliseconds. Since the packets come every 8ms, this means the ringer will stay on without interruption while the remote button held down, and will ring for about 20ms after its released. Which isn't noticeable.

To turn on the ringer, the microcontroller board powers a relay. That relay connects an A23 battery (12V) to a ringer module which converts the DC into 70V 20Hz AC to power the ringer directly.

Note: There is some experimentation to be done to increase the volume of the ringer. Perhaps another battery in parallel, or a different power source altogether.

### Playing audio
When the handset is lifted off the cradle, the phone will play a random audio file through the speaker.

The audio is generated by an Adafruit SFX board which is controlled using UART from the LoRa receiver module.

When the handset is placed back on the cradle, the audio will stop.

When the dial is turned and the handset is off the cradle, the current audio will be interrupted and the phone will play a giggling noise. When it's released, it will start a new audio.

